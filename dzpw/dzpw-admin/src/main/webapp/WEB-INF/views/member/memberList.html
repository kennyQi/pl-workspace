<#assign contextPath=springMacroRequestContext.getContextPath() />

<div class="pageHeader">
	<form id="pagerForm" rel="pagerForm" onsubmit="return navTabSearch(this);"
		action="${contextPath}/lm/member/list" method="post">

		<input type="hidden" name="pageNum" value="${pagination.pageNo}" /> 
		<input type="hidden" name="numPerPage" value="${pagination.pageSize}" />
		
		<div class="searchBar">
		<br>
			<table class="searchContent">
				<tr>
					<td>
						<label>用户名：</label>
						<input type="text" name="loginName" value="${(puserQO.loginName)!''}" />
					</td>
					<td>
						<label>手机号码：</label>
						<input type="text" name="mobile" value="${(puserQO.mobile)!''}" />
					</td>
					<td>
						<label>来源：</label>
						<select name="source" id="source">
							<option value="">全部</option>
							 <#list sourceList as source>
								<option value="${(source.key)!''}" <#if puserQO.source== source.key>selected="selected"</#if>>${source.value}</option>
						     </#list>
						</select>
					</td>
					<td>
						<label>注册时间：</label>
						<input type="text" readonly="readonly" name="beginTimeStr" value="${(beginTimeStr)!''}" class="date"/>
						~<input type="text" readonly="readonly" name="endTimeStr" value="${(endTimeStr)!''}" class="date"/>
					</td>
					
				</tr>
				
			</table>
			<div class="subBar">
				<ul>
					<li>
						<div class="buttonActive">
							<div class="buttonContent">
								<button type="submit">查询</button>
							</div>
						</div>
					</li>
				</ul>
			</div>
		</div>
	</form>
</div>
<div class="pageContent">
	<table class="table" width="100%" layoutH="138">
		<thead>
			<tr>
				<th width="60">用户名</th>
				<th width="60">手机号码</th>
				<th width="60">注册时间</th>
				<th width="60">最近登录时间</th>
				<th width="60">来源</th>
				<th width="80" align="center">操作</th>
			</tr>
		</thead>
		<tbody>
			<#if pagination??>
			<#list pagination.list as m>
				<tr height="60px">
					<td>
						<#if m.authInfo??>
							${(m.authInfo.loginName)!''}
						</#if>
					</td>
					<td>
						<#if m.contactInfo??>
							${(m.contactInfo.mobile!'')}
						</#if>
					</td>
					<td>
						<#if m.baseInfo??&&m.baseInfo.createTime??>
							${(m.baseInfo.createTime)?string("yyyy-MM-dd HH:mm:ss")}
						</#if>
					</td>
					<td>
					<#if m.status??&&m.status.lastLoginTime??>
						${(m.status.lastLoginTime)?string("yyyy-MM-dd HH:mm:ss")}
					</#if>
					
					</td>
					<td>
						<#if m.baseInfo??&&m.baseInfo.source??>
							 <#list sourceList as source>
								<#if m.baseInfo.source== source.key>${source.value}</#if>
						     </#list>
						</#if>
					</td>
					<td>
						<a title="确定要重置密码吗?" style="color: blue" target="ajaxTodo" href="${contextPath}/lm/member/resetPwd?id=${m.id}" >重置</a>
						<a  style="color: blue" target="dialog" href="${contextPath}/lm/member/detail?id=${m.id}" width="500" height="700">查看详情</a>
					</td>
					
				</tr>
			</#list>
			</#if>
		</tbody>
	</table>

	<#include "/public/pagination/pagination.html">
</div>
