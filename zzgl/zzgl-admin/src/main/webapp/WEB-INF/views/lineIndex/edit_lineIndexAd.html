<#assign contextPath=springMacroRequestContext.getContextPath() />
<#assign navTabid = navTabid!'lineIndexAdS' />
<link rel="stylesheet" href="${contextPath}/resources/js/trumbowyg/design/css/trumbowyg.css">
<script src="${staticPath}/js/jquery-validation-1.9.0/lib/jquery.js" type="text/javascript"></script>
<script src="${contextPath}/resources/js/ajaxfileupload.js" type="text/javascript"></script>
<script type="text/javascript">
	var path = '${contextPath}';
	
	function checkPosition(){
		
		if($("#position2").val()!=$("#positionHide").val() && $("#positionHide").val()!=""){
			alert('请上传广告图片');
			return false;
		}else{
			return true;
		}
	}
	
	var imageAdd = {};
	
	imageAdd.imageUpload = function (me) {
		
		$.ajaxFileUpload({
			url : path+"/file/imgUpload",
	       	secureuri : false,
	       	fileElementId : 'line_edit_imgFile',
	       	dataType : 'json',
	       	data: {
	       		//maxHeight: 175,
	       		//maxWidth: 230,
	       		maxSize: 20480
	       	},
			success: function (data, status) {
				console.info(data);
				if ("success" == data.status) {
		       		$("#addSpecForm #imgView").attr("src", data.imageUrl);
		       		$("#addSpecForm #imagePath").attr("value",data.imageUrl);
		       		$("#addSpecForm #fileName").attr("value",data.imageName);
		       		$("#addSpecForm #imageInfo").attr("value",data.fileInfo);
	    	  	} else {
	    	  		alertMsg.info(data.msg);
	    	  	}
			},
	        error: function (data, status, e) {
	        	alertMsg.info("上传失败");
	        }
	    });
	}

</script>
<div class="pageContent" style="text-align:left;">
	<!-- 特价门票form -->
	<div class="formWarpper" >
		<form method="post" id="addSpecForm" enctype="multipart/form-data" action="${contextPath}/lineIndexAd/editLineIndexAd" class="pageForm required-validate" onsubmit="return validateCallback(this,dialogAjaxDone);">
		<input type="hidden" name="id" value="${(lineIndexAd.id)!}">
		
		<div class="pageFormContent" layoutH="58">
			<div class="unit">
					<label>*栏目内容：</label>
					<select name="contentId" >
						<#list programaContentDTOList as programaContentDTO>
							<option value="${programaContentDTO.id}" 
							<#if programaContentDTO.id==lineIndexAd.programaContent.id>
									selected="selected"
							</#if>
							>${programaContentDTO.content}</option>
						</#list>
					</select>
			</div>
			<div class="unit">
				<label>*线路价格：</label> 
				<input type="text" name="price" class="required number" min="0"  size="50" value="${(lineIndexAd.price)?c}"/>
			</div>
			<div class="unit" id="isSend">
			<label>*线路类型：</label>
			<#if lineIndexAd.lineType==1>
				<input type="radio" name="lineType" id="lineType" value="1" checked="checked"/>周边游
				<#elseif lineIndexAd.lineType==2>
				<input type="radio" name="lineType" id="lineType" value="2" checked="checked"/>跟团游
			</#if>
			</div>
			<div class="unit">
				<label>*广告标题：</label>
				<input type="text" name="title" size="50"   class="required" maxlength="50 " value="${(hslAdDto.adBaseInfo.title)!}"/>
			</div>
			<div class="unit">
				<label>*广告链接：</label>
				<input type="text" id="url" name="url" size="45" maxlength="400 "  class="required url"  value="${(hslAdDto.adBaseInfo.url)!}" /> <a style="color:green;"></a>
			</div>
			<div class="unit">
				<label>*优先级：</label>
				<input type="text" id="priority" name="priority" size="12" min="0" class="required digits"  value="${(hslAdDto.adBaseInfo.priority)!}" /> <a style="color:green;"></a>
			</div>
			
			<div class="unit">
				<label>*广告图片：</label>
					<span style="color: red">
						完成上传图片，再次修改广告位时需要重新上传图片，原图会失效!<br/><br/>
					</span>
					<span style="color: red">
						&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
						建议上传
						220x160
						尺寸jpg、gif、png、bmp或JPG、GIF、PNG、BMP格式，单张图片大小不超过2MB<br/><br/>
					</span>
					<span>
						<img id="imgView" src=${(hslAdDto.adBaseInfo.imagePath)!} width="120" height="120" style="padding-left: 65px;"/>
					</span>	
					<span style="padding-left: 60px;">
						<input id="line_edit_imgFile" name="file" type="file" onchange="imageAdd.imageUpload(this);" size="60" style="width: 170px;"/><span style="color: red;">*</span>
						<input id="imageInfo" type="hidden" name="imageInfo" required="required" value="${(hslAdDto.adBaseInfo.imageInfo)!}"/>
						<input id="fileName" type="hidden" name="fileName" required="required" value="${(hslAdDto.adBaseInfo.fileName)!}/>
						<input id="imagePath" type="hidden" name="imagePath" required="required" value="${(hslAdDto.adBaseInfo.imagePath)!}/>
					</span>
			</div>
			<div class="unit">
				<!-- <label>立即展示：</label>
				<input type="checkbox" value="true" name="show" checked  /> -->
			</div>
		</div>
		<div class="formBar">
			<ul>
				<li><div class="buttonActive"><div class="buttonContent"><button type="submit">提交</button></div></div></li>
				<li><div class="button"><div class="buttonContent"><button type="button" class="close">取消</button></div></div></li>
			</ul>
		</div>
	</form>
	</div>
</div>
