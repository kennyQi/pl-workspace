<#assign contextPath=springMacroRequestContext.getContextPath() />
<div class="pageHeader page_header_fix">
	<form id="pagerForm" rel="pagerForm" onsubmit="return navTabSearch(this);" action="${contextPath}/mileOrder/list" method="post">
		<input type="hidden" name="pageNum" value="${(pagination.pageNo)!'0'}" />
		<input type="hidden" name="numPerPage" value="${(pagination.pageSize)!'20'} " />
		<div class="searchBar dwz_query_box2">
			<table class="searchContent" border="0">
				<tr>
					<td>分销商：</td>
					<td>
						<select name="distributorId" tosel="${(qo.distributorId)!}">
							<option value="">请选择</option> <#list distributorList as t>
							<option value="${t.id}">${t.name}</option> </#list>
						</select>
					</td>
					<td>订单号：</td>
					<td>
						<input name="orderCode" type="text" maxlength="16" value="${(qo.orderCode)!}" />
					</td>
					<td>明珠会员卡号：</td>
					<td>
						<input name="csairCard" type="text" maxlength="16" value="${(qo.csairCard)!}" />
					</td>
					<td>明珠会员姓名：</td>
					<td>
						<input name="csairName" type="text" maxlength="16" value="${(qo.csairName)!}" />
					</td>
				</tr>
				<tr>
					<td>支付时间：</td>
					<td>
						<input name="payDateStart" type="text" class="date" readonly="readonly" datefmt="yyyy-MM-dd HH:mm" value="${(qo.payDateStart)!}" />
					</td>
					<td>至</td>
					<td>
						<input name="payDateEnd" type="text" class="date" readonly="readonly" datefmt="yyyy-MM-dd HH:mm" value="${(qo.payDateEnd)!}" />
					</td>
					<td>导入时间：</td>
					<td>
						<input name="importDateStart" type="text" class="date" readonly="readonly" datefmt="yyyy-MM-dd HH:mm" value="${(qo.importDateStart)!}" />
					</td>
					<td>至</td>
					<td>
						<input name="importDateEnd" type="text" class="date" readonly="readonly" datefmt="yyyy-MM-dd HH:mm" value="${(qo.importDateEnd)!}" />
					</td>
				</tr>
				<tr>
					<td>状态：</td>
					<td>
						<select name="status" to_sel="${pagination.condition.status}">
							<option value="">全部</option>
							<option value="200">待审核</option>
							<option value="201">审核通过</option>
							<option value="202">审核不通过</option>
							<option value="203">提交南航处理</option>
							<option value="204">南航处理成功</option>
							<option value="205">南航处理失败</option>
						</select>
					</td>
				</tr>
			</table>
			<div class="subBar">
				<ul>
					<li>
						<div class="buttonActive">
							<div class="buttonContent">
								<button type="submit">查询</button>
							</div>
						</div>
					</li>
					<li>
						<div class="buttonActive">
							<a class="add" href="${contextPath}/mileOrder/to_import" target="dialog" mask="true" width="600" height="367">
								<span>导入</span>
							</a>
						</div>
					</li>
					<li>
						<div class="buttonActive">
							<a onclick="exportExcelMileOrder()">
								<span>导出</span>
							</a>
						</div></li>
					<li>
						<div class="buttonActive">
							<div class="buttonContent">
								<button type="button" onclick="clearForm()">重置</button>
							</div>
						</div>
					</li>
				</ul>
			</div>
		</div>
	</form>
</div>
<div class="pageContent page_box">
	<div class="panelBar">
		<ul class="toolBar">
			<li><a title="确实要删除这些记录吗?" target="selectedTodo" rel="ids" href="${contextPath}/mileOrder/remove" class="delete">
					<span>删除</span>
				</a>
			</li>
			<li><a title="您需要保证审核的记录信息与分销商提供的信息一致，确认要审核通过吗？" target="selectedTodo" rel="ids" href="${contextPath}/mileOrder/check" class="icon">
					<span>审核</span>
				</a>
			</li>
			<!-- 
			<li><a class="add" href="${contextPath}/mileOrder/to_add" target="dialog" width="600" height="370" mask="true">
					<span>新增</span>
					
					
				</a></li>
 -->
		</ul>
	</div>
	<div layoutH="170">
		<table class="table" cellpadding="0" cellspacing="0" width="100%">
			<thead>
				<tr>
					<th width="70"><input type="checkbox" group="ids" class="checkboxCtrl" />
					</th>
					<th>分销商</th>
					<th>订单号</th>
					<th>明珠会员卡号</th>
					<th>明珠会员姓名</th>
					<th>南航里程</th>
					<th>支付时间</th>
					<th>导入时间</th>
					<th>状态</th>
					<th width="200">操作</th>
				</tr>
			</thead>
			<tbody>
				<#list pagination.list as t>
				<tr>
					<td>
						<#if t.status == 200 || t.status == 201>
						<input type="checkbox" name="ids" value="${(t.id)!''}" />
						</#if>
					</td>
					<td>${(t.distributor.name)!}</td>
					<td>${(t.orderCode)!}</td>
					<td>${(t.csairCard)!}</td>
					<td>${(t.csairName)!}</td>
					<td>${(t.count)!}</td>
					<td>${(t.payDate)!}</td>
					<td>${(t.importDate)!}</td>
					<td><#if t.status == 200> 待审核 <#elseif t.status == 201> 审核通过 <#elseif t.status == 202> 审核不通过 <#elseif t.status == 203> 提交南航处理 <#elseif t.status == 204> 南航处理成功 <#elseif t.status == 205> 南航处理失败 </#if>
					<td class="operate_box">
						<a href="${contextPath}/mileOrder/view?id=${t.id}" target="dialog" width="900" height="555" mask="true">查看</a>
						<#if t.status == 200 || t.status == 201>
							<a href="${contextPath}/mileOrder/remove?ids=${t.id}" target="ajaxTodo" title="确认删除？">删除</a>
						</#if>
						<#--<!--
 
						<a href="${contextPath}/mileOrder/test1?ids=${t.id}" target="ajaxTodo" >处理</a>
						<a href="${contextPath}/mileOrder/test2?ids=${t.id}" target="ajaxTodo" >成功</a>
						<a href="${contextPath}/mileOrder/test3?ids=${t.id}" target="ajaxTodo" >失败</a>
--> 
						
					</td>
				</tr>
				</#list>
			</tbody>
		</table>
	</div>
	<#include "/public/pagination/pagination.html">
</div>
<script type="text/javascript">
	function exportExcelMileOrder() {
	var parmStr = $("#pagerForm", navTab.getCurrentPanel()).serialize();
	var url = "${contextPath}/mileOrder/export?" + parmStr;
	window.open(url);
}
</script>
