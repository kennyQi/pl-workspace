<#assign contextPath=springMacroRequestContext.getContextPath() />
<link href="${contextPath}/resources/css/ajaxfileupload.css" rel="stylesheet" type="text/css" media="print" />
<script src="${contextPath}/resources/js/ajaxfileupload.js" type="text/javascript"></script>
<script type="text/javascript">
function fileChg() {
	$.ajaxFileUpload({
		url:'${contextPath}/system/upload/img',
		secureuri : false,
		fileElementId : 'imageFile',
		dataType : 'json',
		success: function (data, status) {
			alert(status);
			alert(data.message);
			
			$("#brandPictureImageSrc").attr("src","${contextPath}"+data.message);
        },

    });
}
</script>
<h2 class="contentTitle">ajax upload</h2>
<div class="pageContent">
	<form action="${contextPath}/test/revice" method="post" class="pageForm required-validate" onsubmit="return validateCallback(this, navTabAjaxDone)">

		<div class="pageFormContent" layoutH="97">

				<img id="brandPictureImageSrc" height="120px" width="120px" src="" alt="" />
				<div>
					<input id="imageFile" name="imageFile" type="file" onchange="fileChg(this);" />
				</div>

		</div>
</div>
<div class="formBar">
	<ul>
		<li><div class="buttonActive">
				<div class="buttonContent">
					<button type="submit">保存</button>
				</div>
			</div>
		</li>
		<li><div class="button">
				<div class="buttonContent">
					<button class="close" type="button">关闭</button>
				</div>
			</div>
		</li>
	</ul>
</div>
</form>
</div>