<#assign contextPath=springMacroRequestContext.getContextPath() />
<#import "/public/frame/default.html" as frame />
<@frame.head "票量旅游 -订单支付">
<link href="${contextPath}/resources/css/common.css" rel="stylesheet" />
<script src="${contextPath}/resources/js/jquery-1.11.1.min.js" language="javascript"></script>
<script src="${contextPath}/resources/js/common.js" language="javascript"></script>
<script src="${contextPath}/resources/js/yx/yxjp_pay_order.js" language="javascript"></script>
<link href="${contextPath}/resources/css/yxjp/yxjp_pay_order.css" rel="stylesheet" />
</@frame.head>
<@frame.main "default" 2>

<!--内容-->
<div class="box">
	<div class="fly_orderBox ma">
		<!--左侧-->
		<div class="orderBox_left fl">
			<!--支付进程-->
			<div class="pay_process ma">
				<ul class="fl ov">
					<li class="fly_on"><i class="fl ic yahei h4">1</i><span class="fl lm yahei h3">填写订单</span></li>
					<li class="fly_on"><i class="fl ic yahei h4">2</i><span class="fl lm yahei h3">支付订单</span></li>
					<li class=""><i class="fl ic yahei h4">3</i><span class="fl lm yahei h3">支付成功</span></li>
				</ul>
			</div>
			<input type="hidden" id="yxOrderToken" value="${yxOrderToken}"/>
			<input type="hidden" id="yxJpPayOrderToken" value="${yxJpPayOrderToken}"/>

			<input type="hidden" id="contextPath" value="${contextPath}"/>
			<input type="hidden" id="daijinquan" value="0"/><!-- 代金券金额 -->
			<input type="hidden" id=xianjinquan" value="0"/><!-- 现金券金额 -->
			<div id="orderNo" style="display: none;">${jPOrder.baseInfo.orderNo}</div>
			<div id="orderId" style="display: none;">${orderId}</div>
			<!--支付进程-->
			<div class="left_box">
				<span class="fly_bt yahei color3 h2 fl">乘机人信息</span>
				<i class="line wd fl"></i>
				<div class="fly_pay_box fl">
					<#if (jPOrder.passengers)??>
						<#list jPOrder.passengers as passanger>
							<#if (passanger.ticket.status ==1)>
								<div class="fly_pasInf yahei color6"><i class="fl">${passanger_index+1}</i><span class="h3 fly_payBt">乘客姓名</span><span class="" style="font-size:20px;width:250px;display:inline-block;">${passanger.baseInfo.name}
								</span><span class="h3 fly_payBt ids">身份证</span><span style="font-size:20px;">${passanger.baseInfo.idNo}</span></div>
								<div class="fly_pasInf yahei color6 h3 fly_payOrder">
									<span class="fly_payBt">订单号</span>${jPOrder.baseInfo.orderNo}<span></span>
									<span class="fly_payBt pays">支付状态</span>
									<span style="color:#fcb714;">${(orderStatusMap[(passanger.ticket.status)?c])!}</span>
								</div>
							</#if>
						</#list>
					</#if>
				</div>
				<span class="fly_bt yahei color3 h2 fl">使用卡券</span>
				<div class="fly_pay_box fl">
					<i class="line wd fl"></i>
					<div class="yahei h3 color6 fly_sale"><span>账户里可使用卡券<i id="position"></i>张</span></div>
					<div class="fly_use fly_saleSel yahei h3 color6 fl"><i></i>使用</div>
					<ul class="fly_sales fl yahei h4 color6">
						<i class="Triangle"></i>
						<li id="options"><i class="Vouchers" id="use"></i><span>使用代金券</span>
							<span type="text" class="texta select yahei h4 color3 companySelect fl" id="optionValue">请选择代金券</span>
							<ul class="selectNav" for="optionValue" id="useCondition">
							</ul>
							<span class="fly_payTs yahei h4 color9" style="margin-left:10px;"></span>
						</li>
						<i id="cashcoupon"></i>
					</ul>
					<div class="fly_noUse fly_saleSel yahei h3 color6 fl" ><i class="fly_pay_cli" id="nouse" onclick="nouse()"></i>不使用</div>

				</div>

				<div class="fly_pay_box fl">
					<i class="line wd fl"></i>
					<div class="fly_payBox fl">
						<span class="fly_payMethod yahei color3 h2 fl">请选择支付方式</span>
						<div class="fly_payPlatform wd disb">
							<span class="yahei h3 color6 fl">支付平台</span>
							<i class="payfor fl alipay"></i>
							<img class="fl" src="${contextPath}/resources/images/alipay_03.png">
						</div>
					</div>
					<div class="fl fly_Clause">
						<i class="fl Agreement" id="service"></i>
                        <span class="yahei h2 fl"><a class="color6" href="${contextPath}/user/jpOrderDeal"
													 target="_blank">票量游机票服务条款</a></span>
					</div>
					<div class="fly_payFor fl">
						<span class="fl yahei color6 h3 fly_payCard">优惠卡券：<i>￥<em id="youhui">0.00</em></i></span>
						<span class="fl yahei color6 h3 fly_payMon">应付金额：<b style="font-size:26px; color:#3ebdb6;">￥<em class="yue">${(jPOrder.payInfo.totalPrice)?string("0.00")}</em></b></span>
						<a href="javascript:;" class=" yahei h3 fr tc bth1">确认无误，前往支付</a>
					</div>
					<div style="clear:both;"></div>
				</div>
			</div>
		</div>
		<!--左侧-->
		<!--右侧-->
		<div class="orderBox_right fr">
			<span class="flight fl yahei tc color3">航班信息</span>
			<#if jPOrder??>
				<form id="myform" action="${contextPath}/yxjp/pay-order" method="post">
					<div id="useCouponIDs" style="display: none;"></div>
					<input type="hidden" name="orderId" value="${orderId}">
				</form>
				<div class="flight_mess fl">
                <span class="flight_com fl yahei"><i>
				</i>${jPOrder.flight.baseInfo.airCompanyName}<b>${jPOrder.flight.baseInfo.flightNo} &nbsp;${jPOrder.flight.baseInfo.planeType}</b> &nbsp;
                <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;${jPOrder.flight.baseInfo.cabinName}</span>
					<div class="voyage fl wd">
						<div class="voyage_left fl"><i></i></div>
						<div class="voyage_right fl">
							<span class="start citys fl yahei">
								<span class="time fl">${((jPOrder.flight.baseInfo.startTime)?date)?string('HH:mm')}<br/><i class="color6 h3 fl normal">${(jPOrder.flight.baseInfo.startTime)?date}</i></span>
								<span class="place fl color6 yahei h3">${jPOrder.flight.baseInfo.departAirport}
									 <#if jPOrder.flight.baseInfo.departTerm=="--">
										 T1
										 <#else>
											 ${(jPOrder.flight.baseInfo.departTerm)!}
									 </#if>
								</span>
							</span>
							<span class="end citys fl yahei">
								<span class="time fl" style="font-size:20px;">${((jPOrder.flight.baseInfo.endTime)?date)?string('HH:mm')}<br/><i class="color6 h3 fl normal">${(jPOrder.flight.baseInfo.endTime)?date}</i></span>
								<span class="place fl color6 yahei h3">${jPOrder.flight.baseInfo.arrivalAirport}
									<#if jPOrder.flight.baseInfo.arrivalTerm=="--">
										T1
										<#else>
											${jPOrder.flight.baseInfo.arrivalTerm}
									</#if>
								</span>
							</span>
							<span class="fl yahei color9 h4" style="margin-top:20px;">直飞&nbsp;&nbsp;&nbsp;&nbsp;行程时间：
								<#if (flyHours!=0)>
									${flyHours}小时
								</#if>
								<#if (flyMinutes !=0)>
									${flyMinutes}分钟
								</#if>
                        	</span>
						</div>
					</div>
					<div class="charge fl wd">
						<span class="yahei color9 h3">票价：￥${jPOrder.flight.policyInfo.ibePrice}</span>
						<span class="yahei color9 h3">机建+燃油：￥${(jPOrder.flight.policyInfo.buildFee+jPOrder.flight.policyInfo.oilFee)?c}</span><br/>
						<span class="yahei color9 h3">优惠卡券：￥<em id="youhuis">0</em></span>
					</div>
					<div class="price fl wd">
						<span class="yahei color6 h2 fl">总票价：<b>￥<em class="payAmount">${(jPOrder.payInfo.totalPrice-jPOrder.payInfo.totalCancelPrice)?c}</em></b></span>
					</div>
				</div>
			</#if>
		</div>
		<!--右侧-->
	</div>
</div>
<!--内容-->

<div class="fly_loadWait">
	<div class="loadbg"></div>
	<div class="loadIcon yahei">正在提交，请稍后。。。</div>
</div>

</@frame.main> <@frame.end "default"> </@frame.end>


