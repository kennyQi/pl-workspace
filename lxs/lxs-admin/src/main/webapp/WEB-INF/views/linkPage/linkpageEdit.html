<#assign contextPath=springMacroRequestContext.getContextPath() />



<script src="${staticPath}/js/jquery-validation-1.9.0/lib/jquery.js"
	type="text/javascript"></script>
<script src="${contextPath}/resources/js/ajaxfileupload.js"
	type="text/javascript"></script>
<script type="text/javascript">
	var path = '${contextPath}';

	var imageAdd = {};

	imageAdd.imageUpload = function(me) {

		var fileid;
		var imgView;
		var imageInfo;
		var imagePath;
		var fileName;

		if (me.id == "imgFile1") {
			fileid = 'imgFile1';
			imgView = $("#imgView1");
			imageInfo = $("#imageInfo1");
			imagePath = $("#imagePath1");
			fileName = $("#fileName1")
		}
		if (me.id == "imgFile2") {
			fileid = 'imgFile2';
			imgView = $("#imgView2");
			imageInfo = $("#imageInfo2");
			imagePath = $("#imagePath2");
			fileName = $("#fileName2")
		}
		if (me.id == "imgFile3") {
			fileid = 'imgFile3';
			imgView = $("#imgView3");
			imageInfo = $("#imageInfo3");
			imagePath = $("#imagePath3");
			fileName = $("#fileName3")
		}
		if (me.id == "imgFile4") {
			fileid = 'imgFile4';
			imgView = $("#imgView4");
			imageInfo = $("#imageInfo4");
			imagePath = $("#imagePath4");
			fileName = $("#fileName4")
		}
		if (me.id == "imgFile5") {
			fileid = 'imgFile5';
			imgView = $("#imgView5");
			imageInfo = $("#imageInfo5");
			imagePath = $("#imagePath5");
			fileName = $("#fileName5")
		}
		$.ajaxFileUpload({
			url : path + "/file/imgUpload",
			secureuri : false,
			fileElementId : fileid,
			dataType : 'json',
			data : {
				//maxHeight: 175,
				//maxWidth: 230,
				maxSize : 500
			},
			success : function(data, status) {
				if ("success" == data.status) {

					imgView.attr("src", data.imageUrl);
					imageInfo.attr("value", data.fileInfo);
					imagePath.attr("value", data.imageUrl);
					fileName.attr("value", data.imageName);

				} else {
					alertMsg.info(data.msg);
				}
			},
			error : function(data, status, e) {
				alertMsg.info("上传失败");
			}
		});
	}

	function change(obj) {
		if (obj.checked) {
			obj.attr("checked", "false");
		}
	}
</script>
<div class="pageHeader">

	<form action="${contextPath}/linkpage/linkpageadd" method="post"
		enctype="multipart/form-data" class="pageForm required-validate"
		onsubmit="return validateCallback(this, navTabAjaxDone)">

		<table>
			<tr style="float:left;">
				<td><div style="float:left;">
						启动页：<span style="color: red;">*</span>
					</div>

					<div style="float:left;height:120;margin-left: 8px">
						<span> <img id="imgView1" width="120" height="180"
							src="${linkPage0.imageURL}" />
						</span>
					</div>

					<div style="float:right;height: 120px">
						<div style="margin-top:140px;margin-bottom: 6px">


							<span style="margin-left: -100px"> <input id="imgFile1"
								name="file" type="file" onchange="imageAdd.imageUpload(this);"
								size="60" style="width: 170px;" /><span style="color: red;">*</span>

								<input id="imageInfo1" type="hidden" name="imageInfo" />

								<input id="imagePath1" type="hidden" name="imagePath" /> <input
								id="fileName1" type="hidden" name="fileName" />
							</span>
						</div>

						<div style="margin-left: 8px">
							<span style="color: red;">建议上传尺寸640*960px，大小不超过500kb的图片;</span>
						</div>
					</div></td>
			</tr>
			<tr height="20px;" />
			<tr style="float:left;">
				<td>


					<div style="float:left;">
						欢迎页：<span style="color: red;">*</span>
					</div>
					<div style="float:left;height:120;margin-left: -16px">
						<span> <img id="imgView2" width="120" height="180"
							src="${linkPage1.imageURL}" />
						</span> <br></br>
						<div >
							<div>
								<span> <input id="imgFile2" name="file" type="file"
									onchange="imageAdd.imageUpload(this);" size="60"
									style="width: 170px;" /> <input id="imageInfo2" type="hidden"
									name="imageInfo" /> <input id="imagePath2" type="hidden"
									name="imagePath" /> <input id="fileName2"
									type="hidden" name="fileName" />
								</span>


							</div>


						</div>


					</div>
				<td>
				<td>



					<div style="float:left;height:120">
						<span> <img id="imgView3" width="120" height="180"
							src="${linkPage2.imageURL}" />
						</span> <br></br>
						<div >
							<div>


								<span> <input id="imgFile3" name="file" type="file"
									onchange="imageAdd.imageUpload(this);" size="60"
									style="width: 170px;" /> <input id="imageInfo3" type="hidden"
									name="imageInfo" /> <input id="imagePath3" type="hidden"
									name="imagePath" /> <input id="fileName3" type="hidden"
									name="fileName" />

								</span>
							</div>


						</div>


					</div>
				<td>
				<td>



					<div style="float:left;height:120">
						<span> <img id="imgView4" width="120" height="180"
							src="${linkPage3.imageURL}" />
						</span> <br></br>
						<div >
							<div>


								<span> <input id="imgFile4" name="file" type="file"
									onchange="imageAdd.imageUpload(this);" size="60"
									style="width: 170px;" /> <input id="imageInfo4" type="hidden"
									name="imageInfo" /> <input id="imagePath4" type="hidden"
									name="imagePath" /> <input id="fileName4" type="hidden"
									name="fileName" />

								</span>
							</div>


						</div>


					</div>
				<td>
				<td>



					<div style="float:left;height:120">
						<span> <img id="imgView5" width="120" height="180"
							src="${linkPage4.imageURL}" />
						</span> <br></br>
						<div >
							<div>


								<span> <input id="imgFile5" name="file" type="file"
									onchange="imageAdd.imageUpload(this);" size="60"
									style="width: 170px;" /> <input id="imageInfo5" type="hidden"
									name="imageInfo" /> <input id="imagePath5" type="hidden"
									name="imagePath" /> <input id="fileName5" type="hidden"
									name="fileName" />

								</span>
							</div>


						</div>


					</div>
				<td>
				<tr>
				<td style="text-align: left;">
				<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
							<!-- <span style="color: red;">建议上传尺寸640*960px，大小不超过500kb的图片;</span> -->
				</td>
				</tr>
			</tr>


			<tr>
				<td>
				<br/>
				<br/>
				<div class="" style="float:right;height:800px">
						<ul>
							<li><div class="buttonActive">

									<div class="buttonContent">
										<button type="submit"
											onclick="return checkPosition()"><span>保存</span></button>
									</div>
								</div></li>
						</ul>
					</div></td>
			</tr>

		</table>
		<input value="${linkPage0.id}" type="hidden" name="linkpageid">
		<input value="${linkPage1.id}" type="hidden" name="linkpageid">
		<input value="${linkPage2.id}" type="hidden" name="linkpageid">
		<input value="${linkPage3.id}" type="hidden" name="linkpageid">
		<input value="${linkPage4.id}" type="hidden" name="linkpageid">

	</form>
</div>


