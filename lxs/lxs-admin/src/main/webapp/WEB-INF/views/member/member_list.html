<#assign contextPath=springMacroRequestContext.getContextPath() />
<script src='${contextPath}/resources/js/jquery.autocomplete.js'></script>
<link href='${contextPath}/resources/css/jquery.autocomplete.css' rel='stylesheet' />
<div class="pageHeader">
	
	<form id="pagerForm" rel="pagerForm" onsubmit="return navTabSearch(this);"
		action="${contextPath}/member/list" method="post">
		
		<input type="hidden" name="pageNum" value="" />
		<input type="hidden" name="numPerPage" value="" />
		<div class="searchBar">
			<table class="searchContent">
				<tr>
					<td style="text-align: left">
						邮箱：
					</td>
					<td><input type="text" name="email" value="${userQO.email}" ></td>
					<td style="text-align: left">
						登录账户：
					</td>
					<td><input type="text" name="loginName" value="${userQO.loginName}" ></td>
					<td style="text-align: left">
						手机号码：
					</td>
					<td><input type="text" name="mobile" value="${userQO.mobile}" ></td>
					<td style="text-align: left">
						来源：
					</td>
					<td style="text-align: left">
						<select name="source">
							<option value="" >全部</option>
							<option value="wx" <#if userQO.source=='wx'> selected="selected" </#if>>微信</option>
							<option value="PC" <#if userQO.source=='PC'> selected="selected" </#if>>PC</option>
						</select>					
					</td>
					<td>注册时间
		       		<input id="beginDate" name="beginTime" <#if userQO.beginTime??> value="${userQO.beginTime}"  </#if>   class="date" [dateFmt="yyyy-MM-dd"] readonly="readonly" />
		       		-<input id="endDate"  name="endTime" <#if userQO.endTime??> value="${userQO.endTime}"  </#if>   class="date" [dateFmt="yyyy-MM-dd"] readonly="readonly" />
		    		</td>
				</tr>
			</table>
			<div class="subBar">
				<ul>
					<li><div class="buttonActive">
							<div class="buttonContent">
								<button onclick="return checkQuery();">查询</button>
							</div>
						</div>
					</li>
				</ul>
			</div>
		</div>
	</form>
</div>
<div class="pageContent">
	<div class="panelBar">
		<ul class="toolBar">
		</ul>
	</div>
	<table class="table" width="100%" layoutH="150" >
		<thead>
			<tr>
				<th width="22"><input type="checkbox" group="ids"
					class="checkboxCtrl">
				</th>
 				<th width="100">登录账号</th>
 				<th width="100">账号类别</th>
 				<th width="100">邮箱</th>
				<th width = "100">电话</th>
				<th width = "150">注册时间</th>
				<th width = "150">最近登录时间</th>
				<th width = "50">来源</th>
				<th width="40">操作</th>
			</tr>
		</thead>
		<tbody>
			<#if (pagination.list?size>0)>
			<#list pagination.list as userDTO>
			<tr>

				<td><input name="ids" value="${userDTO.id}" type="checkbox">
				</td>
				<td>${(userDTO.authInfo.loginName)!}</td>
				<td><#if userDTO.baseInfo.type==2>企业</#if></td>
				<td>${(userDTO.contactInfo.email)!}</td>
				<td>${(userDTO.contactInfo.mobile)!}</td>
				<td>${userDTO.baseInfo.createTime?datetime}</td>
				<#if (userDTO.status.lastLoginTime)??>
				<td>${userDTO.status.lastLoginTime?datetime}</td>
				<#else>
				<td>&nbsp;</td>
				</#if>
				<td>${userDTO.baseInfo.source}</td>
				<td><a title="确定重置密码吗？" target="ajaxTodo"
					href="${contextPath}/member/reset?id=${userDTO.id}">重置密码</a></td>

			</tr>
			</#list>
			</#if>			
		</tbody>
	</table>
	<#include "/public/pagination/pagination.html">
</div>
<script type="text/javascript">
 //检查查询条件
 function checkQuery(){
    var beginDate = document.getElementById("beginDate").value;
    var endDate = document.getElementById("endDate").value;
    if(beginDate != "" && endDate != ""){
       if(beginDate > endDate){
          alert("结束时间不能小于开始时间");
          return false;
       }
    }
    
    
    if(beginDate != ""  && endDate == ""){
       document.getElementById("beginDate").value = beginDate;
    }
    
    if(endDate != "" && beginDate == ""){
       document.getElementById("beginDate").value = endDate;
    }
 }

</script>