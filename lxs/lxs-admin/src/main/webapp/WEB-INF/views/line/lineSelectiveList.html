<#assign contextPath=springMacroRequestContext.getContextPath() />
<script src='${contextPath}/resources/js/jquery.autocomplete.js'></script>
<link href='${contextPath}/resources/css/jquery.autocomplete.css'
	rel='stylesheet' />
<div class="pageHeader">
	<form id="pagerForm" rel="pagerForm"
		onsubmit="return navTabSearch(this);"
		action="${contextPath}/line/lineSelectiveList" method="post">
		<input type="hidden" name="pageNum" value="${(pagination.pageNo?c)}"/>
		<input type="hidden" name="numPerPage" value="${(pagination.pageSize?c)}" />
		<div class="searchBar">
			<table class="searchContent">
				<tr>
					<td style="text-align: left">产品名称：</td>
					<td><input type="text" name="name" value="${lineSelectiveQO.name}"></td>
					<td style="text-align: left">线路类别：</td>
					<td><select name="type">
							<option value="">全部</option>
							<option value="1"<#if lineSelectiveQO.type=='1'>
								selected="selected" </#if>>精选线路</option>
							<option value="2"<#if lineSelectiveQO.type=='2'>
								selected="selected" </#if>>精选门票</option>
					</select></td>
					<td>
						添加日期：
					</td>
					<td>
		       			<input id="beginDate" name="beginTime" <#if lineSelectiveQO.beginTime??> value="${lineSelectiveQO.beginTime}"  </#if>   class="date" [dateFmt="yyyy-MM-dd"] readonly="readonly" />
		       			-<input id="endDate"  name="endTime" <#if lineSelectiveQO.endTime??> value="${lineSelectiveQO.endTime}"  </#if>   class="date" [dateFmt="yyyy-MM-dd"] readonly="readonly" />
		    		</td>
				</tr>
			</table>
			<div class="subBar">
				<ul>
					<li><div class="buttonActive">
							<div class="buttonContent">
								<button onclick="return checkQuery();"><span>查询</span></button>
							</div>
						</div></li>
				</ul>
			</div>
		</div>
	</form>
</div>
<div class="pageContent">
	<table class="table" width="100%" layoutH="150">
		<thead>
			<tr>

				<th width="100">产品名称</th>
				<th width="100">产品类别</th>
				<th width="100">添加时间</th>
				<th width="100">排序</th>
				<th width="100">操作</th>
			</tr>
		</thead>
		<tbody>
			<#if (pagination.list?size>0)> <#list pagination.list as line>
			<tr>
				<td>${(line.name)}</td> <#if (line.type==1)>
				<td>精选线路</td> <#else>
				<td>精选门票</td> </#if>
				<td>${(line.createDate)}</td>
				<td><table style="height: 100%;width: 100%" border="0">
						<tr style="height: 100%">
							<td style="width: 50%"><a target="ajaxTodo"
								href="${contextPath}/line/changeSort?id=${(line.id)}&type=down"
								style="color: blue">上移</a></td>
							<td style="width: 50%"><a target="ajaxTodo"
								href="${contextPath}/line/changeSort?id=${(line.id)}&type=up"
								style="color: blue">下移</a></td>
						</tr>
					</table></td>
				<td><table style="height: 100%;width: 100%" border="0">
						<tr style="height: 100%">
							<td style="width: 50%"><a title="确定取消该精选线路吗？"
								target="ajaxTodo"
								href="${contextPath}/line/deleteLineSelective?id=${(line.id)}"
								style="color: blue">取消精选</a></td>
							<td style="width: 50%"><a target="dialog"
								href="${contextPath}/line/info?type=detail&id=${line.line.id}&pfid="
								width="700" height="700" style="color: blue">查看详情</a></td>
						</tr>
					</table></td>
			</tr>
			</#list> </#if>
		</tbody>
	</table>
	<#include "/public/pagination/pagination.html">
</div>
<script type="text/javascript">
	//当选择了指定的省份时，则该省份的城市列表初始化出来
	$("#start_province").change(
			function() {
				$.post("${contextPath}/line/searchCity", {
					'province' : $("#start_province").val()
				}, function(data) {
					if (data.length > 0) {
						var layer = "<option value=''>--请选择城市--</option>";
						$.each(data, function(idx, item) {
							layer += "<option value="+item.code +">"
									+ item.name + "</option>";
						});

						$("#start_city").empty();
						$("#start_city").append(layer);
					}
				}, "json");
			});
	
	 //检查查询条件
	 function checkQuery(){
	    var beginDate = document.getElementById("beginDate").value;
	    var endDate = document.getElementById("endDate").value;
	    if(beginDate != "" && endDate != ""){
	       if(beginDate > endDate){
	          alert("结束时间不能小于开始时间");
	          return false;
	       }
	    }
	    
	    
	    if(beginDate != ""  && endDate == ""){
	       document.getElementById("beginDate").value = beginDate;
	    }
	    
	    if(endDate != "" && beginDate == ""){
	       document.getElementById("beginDate").value = endDate;
	    }
 }

</script>