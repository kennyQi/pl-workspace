<#assign contextPath=springMacroRequestContext.getContextPath() />
<script src='${contextPath}/resources/js/jquery.autocomplete.js'></script>
<link href='${contextPath}/resources/css/jquery.autocomplete.css'
	rel='stylesheet' />
<div class="pageHeader">
	<form id="pagerForm" rel="pagerForm" onsubmit="return navTabSearch(this);" 
		action="${contextPath}/advertisement/adList" method="post">
		
		<input type="hidden" name="pageNum" value="${(pagination.pageNo?c)!20}"/>
		<input type="hidden" name="numPerPage" value="${(pagination.pageSize?c)!1}" />
		<div class="searchBar">
			<table class="searchContent">
				<input type="hidden" id="qo_positionId" value=${adQO.positionId!}/>
				<tr>
					<td style="text-align: left">
						广告名称：
					</td>
					<td><input type="text" name="title" value="${adQO.title!}" ></td>
					<td style="text-align: left">
						广告位置：
					</td>
					<td>
						<select  name="positionId" id="h5PositionId" onchange="changePosition(this)">
							<#list adPosition as position>
								<option value="${position.id!}" 
								<#if adQO.positionId == "${position.id}">selected="selected"</#if>
								>${position.baseInfo.name}</option>
							</#list>
						</select>
					</td>
				</tr>
			</table>
			<div class="subBar">
				<ul>
					<li>
						<div class="buttonActive">
							<div class="buttonContent">
								<button type="submit">查询</button>							
							</div>
						</div>
					</li>
				</ul>
				<ul>
					<li>
						<div class="buttonActive">
							<div class="buttonContent"><a target="navTab" rel="addH5AD" href="${contextPath}/advertisement/addAdView"><span>发布广告</span></a>					
							</div>
						</div>
					</li>
				</ul>
			</div>
			</div>
		</div>
	</form>
</div>
<div class="pageContent">
	<table class="table" width="100%" layoutH="150">
		<thead>
			<tr>
				<th width="100">广告名称</th>
				<th width="100">广告位置</th>
				<th width="100">发布时间</th>
				<th width="100">排序</th>
				<th width="100">操作</th>
			</tr>
		</thead>
		<tbody>
			<#if (pagination.list?size>0)> <#list pagination.list as ad>
			<tr>
				<td>${(ad.adBaseInfo.title)}</td>
				<td>${(ad.position.baseInfo.description)}</td>
				<td>${ad.adBaseInfo.createTime?date}</td>
				<td><table style="height: 100%;width: 100%" border="0">
						<tr style="height: 100%">
							<td style="width: 50%"><a target="ajaxTodo"
								href="${contextPath}/advertisement/changePriority?id=${(ad.id)}&type=up"
								style="color: blue">上移</a></td>
							<td style="width: 50%"><a target="ajaxTodo"
								href="${contextPath}/advertisement/changePriority?id=${(ad.id)}&type=down"
								style="color: blue">下移</a></td>
						</tr>
					</table></td>
				<td><table style="height: 100%;width: 100%" border="0">
						<tr style="height: 100%">
							<td style="width: 50%"><a title="确定删除该广告吗？"
								target="ajaxTodo"
								href="${contextPath}/advertisement/deleteAd?adId=${(ad.id)}&positionId=${ad.position.id}&imageId=${ad.adBaseInfo.imageId}"
								style="color: blue">删除</a></td>
							<td style="width: 50%"><a target="dialog"
								href="${contextPath}/advertisement/editAd?id=${ad.id}"
								width="700" height="700" style="color: blue">修改</a></td>
						</tr>
					</table></td>
			</tr>
			</#list> </#if>
		</tbody>
	</table>
	<#include "/public/pagination/pagination.html">
</div>