<#assign contextPath=springMacroRequestContext.getContextPath() />

<script src='${contextPath}/resources/js/jquery.min.js'></script>
<link href='${contextPath}/resources/css/fullcalendar.css' rel='stylesheet' />
<link href='${contextPath}/resources/css/fullcalendar.print.css' rel='stylesheet' media='print' />
<script src='${contextPath}/resources/js/calendar/moment.min.js'></script>
<script src='${contextPath}/resources/js/calendar/jquery-ui.custom.min.js'></script>
<script src='${contextPath}/resources/js/calendar/fullcalendar.min.js'></script>

<script>

	$(document).ready(function() {

		$.getJSON('${contextPath}/viewspot/spots/dateprice?id=${id}',{},function(data){
			for(var i=0;i<data.length;i++){
				var eventObject=new Object();
				eventObject.start=data[i].saleDate;
				if(data[i].num==0){
					eventObject.title='供应商价    '+data[i].salePrice+'\n'+'平台价   '+data[i].salePrice+'\n'+'\n'+'\n'+'剩余量    库存量充足';
				}else{
					eventObject.title='供应商价    '+data[i].salePrice+'\n'+'平台价   '+data[i].salePrice+'\n'+'\n'+'\n'+'剩余量    '+data[i].num;
				}
				$('#calendar').fullCalendar('renderEvent',eventObject,true)
			}
		});
		
		var date=new Date();
		//获取当前年份
		var str=date.getFullYear()+'-';
		//判断月份是否是一位数，若是则前加0
		var month=(date.getMonth()+1);
		if((''+month).length==1){
			str+='0'+(month)+'-';
		}else{
			str+=(month)+'-';
		}
		//判断日期是否是一位数，若是则前加0
		if((''+date.getDate()).length==1){
			str+='0'+date.getDate();
		}else{
			str+=date.getDate();
		}
		$('#calendar').fullCalendar({
			defaultDate: str,
			editable: false,
			events: [

			]
		});
		
	});

</script>
<style>

	body {
		margin: 0;
		padding: 0;
		font-family: "Lucida Grande",Helvetica,Arial,Verdana,sans-serif;
		font-size: 14px;
	}

	#calendar {
		width: 900px;
		margin: 40px auto;
	}

</style>

<div class="pageContent">
	<table>
	<input type="hidden" id="scenicspotid"  value="${id}"></input>
	<div id='calendar'></div>
</table>
</div>
