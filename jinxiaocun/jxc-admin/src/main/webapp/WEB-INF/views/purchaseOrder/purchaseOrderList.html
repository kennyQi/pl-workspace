<#assign contextPath=springMacroRequestContext.getContextPath() />
<div class="pageHeader">
	<form id="pagerForm" rel="pagerForm" onsubmit="return navTabSearch(this);" action="${contextPath}/purchase_order/list" method="post">
		<input type="hidden" name="pageNum" value="${(pagination.pageNo)!'0'}" />
		<input type="hidden" name="numPerPage" value="${(pagination.pageSize)!'20'}" />
		<div class="searchBar dwz_query_box2">
			<table class="searchContent" border="0">
				<tr>
					<td>制单时间：</td>
					<td colspan="3" class="datespan">
						<input name="createDateStartStr" type="text" class="date" readonly="readonly" datefmt="yyyy-MM-dd HH:mm" />
						至
						<input name="createDateEndStr" type="text" class="date" readonly="readonly" datefmt="yyyy-MM-dd HH:mm" />
					</td>
					<td>采购单状态：</td>
					<td>
						<select name="purchaseOrderStatus">
							<option value="">全部</option>
							<option value="0">待审核</option>
							<option value="1">已审核</option>
							<option value="2">待入库</option>
							<option value="3">部分入库</option>
							<option value="4">完成入库</option>
							<option value="5">取消入库</option>
						</select>
					</td>
					<td name="projectId">项目名称：</td>
					<td>
						<select name="projectId">
							<option value="">全部</option> <#list projectList as t>
							<option value="${t.id}">${t.name}</option> </#list>
						</select>
					</td>
				</tr>
				<tr>
					<td>供应商：</td>
					<td>
						<select name="supplierId">
							<option value="">全部</option> <#list supplierList as t>
							<option value="${t.id}">${t.baseInfo.name}</option> </#list>
						</select>
					</td>
					<td>入库仓库：</td>
					<td>
						<select name="warehouseId">
							<option value="">全部</option> <#list warehouseList as t>
							<option value="${t.id}">${t.name}</option> </#list>
						</select>
					</td>
					<td>采购单号：</td>
					<td>
						<input type="text" name="purchaseOrderCode">
					</td>
				</tr>
			</table>
			<div class="subBar">
				<ul>
					<li>
						<div class="buttonActive">
							<div class="buttonContent">
								<button type="submit">查询</button>
							</div>
						</div></li>
					<li>
						<div class="buttonActive">
							<div class="buttonContent">
								<button type="button" onclick="clearForm()">重置</button>
							</div>
						</div></li>
					</li>
					<li>
						<div class="buttonActive">
							<a onclick="exportExcel()">
								<span>导出</span>
							</a>
						</div></li>
				</ul>
			</div>
		</div>
	</form>
</div>
<div class="pageContent">
	<div class="panelBar">
		<ul class="toolBar">
			<li><a class="add" href="${contextPath}/purchase_order/to_add" target="dialog" width="1000" height="620" mask="true">
					<span>新增</span>
				</a>
			</li>
		</ul>
	</div>
	<div layoutH="145">
		<table class="table" cellpadding="0" cellspacing="0" width="100%">
			<thead>
				<tr>
					<th>采购单号</th>
					<th>入库仓库</th>
					<th>供应商</th>
					<th>数量</th>
					<th>含税总金额</th>
					<th>不含税总金额</th>
					<th>项目名称</th>
					<th>制单人</th>
					<th>制单时间</th>
					<th>采购单状态</th>
					<th>是否生成入库单</th>
					<th>操作</th>
				</tr>
			</thead>
			<tbody>
				<#list pagination.list as t>
				<tr>
					<td>${(t.purchaseOrderCode)!}</td>
					<td>${(t.warehouse.name)!}</td>
					<td>${(t.supplier.baseInfo.name)!}</td>
					<td>${(t.totalQuantity)!}</td>
					<td>${(t.totalPriceInclTax)!}</td>
					<td>${(t.totalPriceExclTax)!}</td>
					<td>${(t.project.name)!}</td>
					<td>${(t.createUser)!}</td>
					<td>${(t.createDate)!}</td>
					<td><#if t.status == 0> 待审核 <#elseif t.status == 1> 已审核 <#elseif t.status == 2> 待收货 <#elseif t.status == 3> 部分入库 <#elseif t.status == 4> 入库完成 <#elseif t.status == 5> 取消入库 </#if></td>
					<td></td>
					<td class="operate_box">
						<a href="${contextPath}/purchase_order/to_view?id=${(t.id)}" target="dialog" width="1000" height="620" mask="true">查看</a>
						<a href="${contextPath}/purchase_order/to_check?id=${(t.id)}" target="dialog" width="1000" height="620" mask="true">审核</a>
						<a href="${contextPath}/purchase_order/edit?id=${(t.id)}" target="dialog" width="1000" height="620" mask="true">编辑</a>
						<#if t.status == 0>
						<a href="${contextPath}/purchase_order/remove?idList=${t.id}" target="ajaxTodo" title="确认删除？">删除</a>
						</#if>
					</td>
				</tr>
				</#list>
			</tbody>
		</table>
	</div>
	<#include "/public/pagination/pagination.html">
</div>
